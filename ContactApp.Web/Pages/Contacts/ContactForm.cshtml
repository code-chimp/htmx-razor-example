@using Microsoft.AspNetCore.Mvc.ModelBinding
@using Microsoft.AspNetCore.Mvc.TagHelpers
@model ContactApp.Web.Models.ContactEdit

@{
    var emailError = ViewData.ModelState["Email"]?.ValidationState != ModelValidationState.Valid
        ? ViewData.ModelState["Email"]?.Errors?[0].ErrorMessage
        : null;
    var firstError = ViewData.ModelState["First"]?.ValidationState != ModelValidationState.Valid
        ? ViewData.ModelState["First"]?.Errors[0].ErrorMessage
        : null;
    var lastError = ViewData.ModelState["Last"]?.ValidationState != ModelValidationState.Valid
        ? ViewData.ModelState["Last"]?.Errors[0].ErrorMessage
        : null;
    var phoneError = ViewData.ModelState["Phone"]?.ValidationState != ModelValidationState.Valid
        ? ViewData.ModelState["Phone"]?.Errors[0].ErrorMessage
        : null;
}

<form method="post" enctype="multipart/form-data">
    <div class="mb-3">
        <label asp-for="@Model.Email" class="form-label">Email</label>
        <input asp-for="@Model.Email"
               type="email"
               class="form-control@(emailError != null ? " is-invalid" : "")"
               aria-describedby="emailStatus"
               placeholder="Email"/>
        <span id="emailStatus" class="invalid-feedback">@emailError</span>
    </div>
    <div class="mb-3">
        <label asp-for="@Model.First" class="form-label">First Name</label>
        <input asp-for="@Model.First"
               type="text"
               class="form-control@(firstError != null ? " is-invalid" : "")"
               aria-describedby="firstStatus"
               placeholder="First Name"/>
        <span id="firstStatus" class="invalid-feedback">@firstError</span>
    </div>
    <div class="mb-3">
        <label asp-for="@Model.Last" class="form-label">Last Name</label>
        <input asp-for="@Model.Last"
               type="text"
               class="form-control@(lastError != null ? " is-invalid" : "")"
               aria-describedby="lastStatus"
               placeholder="Last Name"/>
        <span id="lastStatus" class="invalid-feedback">@lastError</span>
    </div>
    <div class="mb-3">
        <label asp-for="@Model.Phone" class="form-label">Phone</label>
        <input asp-for="@Model.Phone"
               type="tel"
               class="form-control@(phoneError != null ? " is-invalid" : "")"
               aria-describedby="phoneStatus"
               placeholder="Phone"/>
        <span id="phoneStatus" class="invalid-feedback">@phoneError</span>
    </div>

    @if (ViewContext.RouteData.Values["id"] is not null)
    {
        <button asp-page-handler="edit" class="btn btn-success">
            <i class="fa fa-floppy-disk"></i>
            Save
        </button>
        <button asp-page-handler="delete" class="btn btn-danger float-end">
            <i class="fa fa-trash"></i>
            Delete
        </button>
    }
    else
    {
        <button class="btn btn-success">
            <i class="fa fa-floppy-disk"></i>
            Save
        </button>
    }
</form>